@using WebApp.Properties;
@{
    ViewBag.Title = "Employee";
    Layout = "~/Views/Shared/_Layout.cshtml";


}
@*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">*@
@*<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>*@

<style>

    .page-template .header {
        position: absolute;
        top: 30px;
        left: 30px;
        right: 30px;
        border-bottom: 1px solid #888;
        text-align: center;
        font-size: 18px;
    }

    .page-template .footer {
        position: absolute;
        bottom: 30px;
        /*left: 30px;
        right: 30px;
        font-size: 12px !important;*/
    }

    .margin-left {
        margin-left: 10px;
    }

    .border-validation-color {
        border: 1px solid red
    }

    .border-style {
    }
</style>


<div class="page-wrapper" style="direction:ltr">
    <!-- ============================================================== -->
    <!-- Bread crumb and right sidebar toggle -->
    <!-- ============================================================== -->
    <div class="page-breadcrumb">
        <div class="row">
            <div class="col-md-10"></div>
            <div class="col-2 d-flex no-block align-items-center">

                <h1>
                     @WebApp.Properties.Resources.Test

                </h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/Home/Index"> Dashboard </a></li>
                        <li class="breadcrumb-item active" aria-current="page"> Request </li>
                        <li class="breadcrumb-item active" aria-current="page"> Index</li>
                    </ol>
                </nav>

            </div>
        </div>
    </div>
    <br />
    <div class="container-fluid">

        <div class="col-md-12">
            <div class="card">
                <div class="card-header"><h5>Request Detail</h5> <button type="button" class="btn btn-success" id="btn-show-employe-modal" style="float:right; padding-top:-10px; color:white">  Add  Request</button></div>
                <br />
                <div class="card-body">
                    <div id="show-all-employee-grid"> </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" style="direction:ltr" id="employee-save-modal" data-backdrop="static" data-keyboard="false" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">New Request</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Job Title </label><br />
                            <input class="form-control border-style " type="text" id="jobTitle" name="jobTitle"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Employee Name </label><br />
                            <input class="form-control border-style" type="text" name="EmployeeName" id="EmployeeName"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Nationality </label><br />
                            <input class="form-control border-style" type="text" id="Nationality"></input>
                        </div>
                    </div>
                </div><br />
                <div class="row">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> </label><br />
                            Relationship  <input style="height:20px;margin-top:-20px" class="form-control " type="checkbox" id="chk-relationship"> </input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Emirates ID #  </label><br />
                            <input class="form-control border-style " type="number" id="EmiratesID"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Employment condition </label><br />
                            <input class="form-control border-style" type="text" id="Employmentcondition"></input>
                        </div>
                    </div>
                </div>

                <div class="row" id="div-relationship">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> RelationShip </label><br />
                            <input class="form-control border-style" type="text" id="RelationShip" name="RelationShip"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Name </label><br />
                            <input class="form-control border-style" type="text" id="Name"></input>
                        </div>
                    </div>
                </div>

                <br />
                <div class="row">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Retirement ID #  </label><br />
                            <input class="form-control border-style" type="number" id="RetirementID"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Govt Authority </label><br />
                            <input class="form-control border-style" type="text" id="GovtAuthority"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Date of Contract Expiry </label><br />
                            <input class="form-control  " type="text" id="DateofContractExpiry" name="DateofContractExpiry"></input>
                        </div>
                    </div>
                </div><br />
                <div class="row">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Mobile 1 #  </label><br />
                            <input class="form-control border-style" type="number" id="Mobile1"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label">  Mobile 2 #</label><br />
                            <input class="form-control border-style" type="number" id="Mobile2"></input>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Date of Birth </label><br />
                            <input class="form-control  " type="text" id="DateofBirth" name="DateofBirth"></input>
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">


                    <div class="col-sm-12">
                        <div>
                            <label class="form-control-label"> Details </label><br />
                            <textarea id="w3review" name="Details" id="Details" rows="4" cols="100"></textarea>
                            @*<textarea cols="5" class="form-control " type="text" id="Details" name="Details" />*@

                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Type of Request </label><br />
                            <select class="form-control select2" id="TypeofRequest" name="TypeofRequest">
                                <option value="0">Select Type of Request</option>
                                <option value="Housing">Housing</option>
                                <option value="External/InternalTreatment"> External/Internal Treatment</option>
                                <option value="Loan">Loan</option>
                                <option value="FinancialAid">Financial Aid</option>
                                <option value="etc">etc</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Request Date </label><br />
                            <input class="form-control  " type="text" id="RequestDate" name="RequestDate"></input>
                        </div>
                    </div>

                </div>
                <br />
                <div class="row">
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Attachement</label><br />
                            <input type="file" class="form-control pname" name="rent-modal-date" id="rent-modal-date" value="">
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div>
                            <label class="form-control-label"> Name </label><br>
                            <input class="form-control border-style" type="text" id="NameOf">
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <label class="form-control-label"> &nbsp </label><br />
                        <button type="button" class="btn btn-success" onclick="fnAddAttachment();" style="color:white">Add Attachment</button>
                    </div>
                </div>
                <br />
                <div class="row" id="appendAttachment">


                </div>

                <div class="row" id="div-attachemnt">
                    <div class=" ">
                        <div id="simpletable_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12">
                                    <table class="table  table-responsive" style="width:780px">
                                        <thead class="thead-default">
                                            <tr class="">
                                                <th style="background: #2c3e50;color: #9f9f9f; text-align: left;width:40%">Attachment</th>
                                                <th style="background: #2c3e50;color: #9f9f9f; text-align: left;width:40%">Name</th>
                                                <th style="background: #2c3e50;color: #9f9f9f; text-align: left;width:20%">Action</th>
                                            </tr>
                                        </thead>

                                        <tbody id="tbl-add-delete-attachement"> </tbody>

                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


                <div class="modal-footer">

                    <button type="button" class="btn btn-default margin-left" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="add-record-to-grid" color:white">Save</button>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="~/Content/sweetalert2/dist/sweetalert2.all.min.js"></script>


<script>

    $(document).ready(function () {
        kendoDates();
        $('#div-relationship').hide();
        $('#div-attachemnt').hide();

        $("#show-all-employee-grid").kendoGrid({
            dataSource: {
                data: products,
                schema: {
                    model: {
                        fields: {
                            JobTitle: { type: "string" },
                            EmployeeName: { type: "string" },
                            Nationality: { type: "string" },
                            Relationship: { type: "string" },
                            EmiratedIDNumber: { type: "string" },
                            EmploymentCondition: { type: "string" },
                            RetirementIDNumber: { type: "string" },
                            GovtAuthority: { type: "string" },
                            DateOfContractExpiry: { type: "string" },
                            Mobile1: { type: "string" },
                            Mobile2: { type: "string" },
                            DateOfBirth: { type: "string" },
                            TypeOfRequst: { type: "string" },
                            RequestDate: { type: "string" },
                        }
                    }
                },
                pageSize: 20
            },
            //toolbar: ["search"],

            height: 550,

            scrollable: true,
            sortable: true,
            filterable: false,
            selectable: true,
            pageable: {
                input: true,
                numeric: false
            },
            columns: [

                { field: "JobTitle", title: "Job Title", width: 150, title: "Job Title" },
                { field: "EmployeeName", title: "Employee Name ", width: 150 },
                { field: "Nationality", title: "Nationality", width: 150 },
                { field: "Relationship", title: "Relationship", width: 150 },
                { field: "EmiratedIDNumber", title: " Emirated ID #", width: 150 },
                { field: "EmploymentCondition", title: "Employment Condition", width: 170 },
                { field: "RetirementIDNumber", title: "Retirement ID #", width: 150 },
                { field: "GovtAuthority", title: "Govt Authority", format: "{0:c}", width: 150 },
                { field: "DateOfContractExpiry", title: "Contract Expiry", format: "{0:c}", width: 150 },
                { field: "Mobile1", title: "  Mobile 1 #", format: "{0:c}", width: 150 },
                { field: "Mobile2", title: " Mobile 2 #", format: "{0:c}", width: 150 },
                { field: "DateOfBirth", title: "DOB", format: "{0:c}", width: 150 },
                { field: "TypeOfRequst", title: "Type Of Requst", format: "{0:c}", width: 150 },
                { field: "RequestDate", title: "Request Date", format: "{0:c}", width: 150 },

                //"ProductName",
                //{ field: "UnitPrice", title: "Unit Price", format: "{0:c}", width: "130px" },
                //{ field: "UnitsInStock", title: "Units In Stock", width: "130px" },
                //{ field: "Discontinued", width: "130px" }
            ]
        });

    });

    $('#chk-relationship').change(function () {

        if (this.checked) {
            $('#div-relationship').show();
        } else {
            $('#div-relationship').hide();
        }
    })


    $('#add-record-to-grid').click(function () {

        if ($('#jobTitle').val() == '') {
            Swal.fire({
                icon: 'info',
                title: '... Job title is required',
                showConfirmButton: false,
                timer: 1500
            });
            return;
        }
        if ($('#EmployeeName').val() == '') {
            Swal.fire({
                icon: 'info',
                title: '... Employee name is required',
                showConfirmButton: false,
                timer: 1500
            });
            return;
        }

        var newRow = { JobTitle: $("#jobTitle").val(), EmployeeName: $("#EmployeeName").val(), Nationality: $("#Nationality").val(), EmiratedIDNumber: $("#EmiratesID").val(), Relationship: $("#RelationShip").val(), EmploymentCondition: $("#Employmentcondition").val(), RetirementIDNumber: $("#RetirementID").val(), GovtAuthority: $("#GovtAuthority").val(), DateOfContractExpiry: $("#DateofContractExpiry").val(), Mobile1: $("#Mobile1").val(), Mobile2: $("#Mobile2").val(), DateOfBirth: $("#DateofBirth").val(), TypeOfRequst: $("#TypeofRequest").val(), RequestDate: $("#RequestDate").val() };
        var grid = $("#show-all-employee-grid").data("kendoGrid");
        grid.dataSource.add(newRow);
        Swal.fire({
            position: 'center',
            icon: 'success',
            title: '...Record Saved Successfully',
            showConfirmButton: false,
            timer: 2000
        })
        $('#employee-save-modal').modal('hide');
    });
    function kendoDates() {

        $("#DateofContractExpiry").kendoDatePicker({
            value: new Date(),
            format: "dd/MM/yyyy",
            parseFormats: ["MMMM yyyy"]
        });
        $("#DateofBirth").kendoDatePicker({
            value: new Date(),
            format: "dd/MM/yyyy",
            parseFormats: ["MMMM yyyy"]
        });
        $("#RequestDate").kendoDatePicker({
            value: new Date(),
            format: "dd/MM/yyyy",
            parseFormats: ["MMMM yyyy"]
        });
    }

    $('#btn-show-employe-modal').click(function () {
        $('#employee-save-modal').modal('show');
    })
    var products = [{
        JobTitle: 'Manager',
        EmployeeName: "Azhar Ali",
        Nationality: "Pakistani",
        Relationship: "unknown",
        EmiratedIDNumber: "98567",
        EmploymentCondition: "Testing",
        RetirementIDNumber: "52648",
        GovtAuthority: "Allowed",
        DateOfContractExpiry: "02/18/2029",
        Mobile1: "034525465879757",
        Mobile2: "034525465879757",
        DateOfBirth: "02/18/1980",
        TypeOfRequst: "Housing",
        RequestDate: "02/18/1980"

    },
    {
        JobTitle: 'Accountant',
        EmployeeName: "Sami khan",
        Nationality: "Pakistani",
        Relationship: "unknown",
        EmiratedIDNumber: "3232",
        EmploymentCondition: "Testing",
        RetirementIDNumber: "334343",
        GovtAuthority: "Allowed",
        DateOfContractExpiry: "02/18/2029",
        Mobile1: "034525465879757",
        Mobile2: "034525465879757",
        DateOfBirth: "02/18/1980",
        TypeOfRequst: "Loan",
        RequestDate: "02/18/1980"

    },
    {
        JobTitle: 'Admin Officer',
        EmployeeName: "Matti ullah",
        Nationality: "Pakistani",
        Relationship: "unknown",
        EmiratedIDNumber: "98567",
        EmploymentCondition: "Testfeing",
        RetirementIDNumber: "52648",
        GovtAuthority: "Allowed",
        DateOfContractExpiry: "02/18/2029",
        Mobile1: "034525465879757",
        Mobile2: "034525465879757",
        DateOfBirth: "02/18/1980",
        TypeOfRequst: "Housing",
        RequestDate: "02/18/1980"

    }];



    function fnAddAttachment() {
        $('#div-attachemnt').show();

        $("#tbl-add-delete-attachement").append('<tr >   <td style="text-align: left;" class="Attachment"> <input type="file" class="form-control pname" name="rent-modal-date" id="rent-modal-date" value=""></td> <td style="text-align: left;" class="AttachementName">  <input class="form-control" placeholder="Enter Attachement Name"  type="text" > </td><td><button type="button" class="btn btn-danger btn-sm" style="float: left;" onclick="deleteRow(this)"><i class="fa fa-Trash"></i>X</button></td>  </tr>');


    }


    function deleteRow(e) {

        $(e).closest('tr').remove();
        var length = $('#tbl-add-delete-attachement').find('tr').length;
        if (length <= 0) {
            $('#div-attachemnt').hide();
        }
    }
</script>

